{% extends form_base %}
{% block content %}
    <h2>Выберите учеников для генерации документа<br> "{{ request.args.get("doc_name") }}"</h2>
    <form name="chose_students" class="chose_students" method="post">
    {% for classroom in range(1, 12) %}
        <details>
            <summary>
                {{ classroom }} класс
                <div class="checkbox">
                    <input id="chose_class{{ classroom }}" type="checkbox">
                    <label for="chose_class{{ classroom }}"></label>
                </div>
            </summary>
            {% for num, let in letters.items() %}
                <details>
                <summary>
                    {{ classroom|string + let }}
                    <div class="checkbox">
                        <input id="chose_class{{ classroom }}{{ let }}" type="checkbox">
                        <label for="chose_class{{ classroom }}{{ let }}"></label>
                    </div>
                </summary>
                {% for student in students.filter_by(admission_year=year-classroom, classroom_letter=num) %}
                    <p class="checkbox">
                        <input type="checkbox" id="{{ student.id }}" name="s{{ student.id }}">
                        <label for="{{ student.id }}">{{ student.lastname }} {{ student.name }} {{ student.patronymic }}</label>
                    </p>
                {% endfor %}
                </details>
            {% endfor %}
            </details>
        {% endfor %}
        <input type="hidden" id="action_type" name="type" value="print">
        <a class="button" onclick="submit('print')">Просмотреть и распечатать документ</a>
        <div class="download_doc">
            <a class="button" onclick="submit('docx')">Скачать .docx</a>
            <a class="button" onclick="submit('pdf')">Скачать .pdf</a>
        </div>
    </form>
    <script src="{{ url_for('static', filename='scripts/select_students.js') }}"></script>
{% endblock %}